(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{50:function(e,t,a){e.exports=a(81)},56:function(e,t,a){},57:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a.n(c),l=a(10),o=(a(55),a(56),a(57),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function i(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=a(23),m=a(8),p=a(2),d=a(3),h=a(5),f=a(4),v=a(19),b=a(6),g=a(21),E=a(7),N=a.n(E),k=a(14),C=a(12),y=a.n(C),O=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t},j="http://127.0.0.1:8000/",w=function(e){return{type:"AUTH_SUCCESS",token:e}},S=function(e){return{type:"AUTH_FAIL",error:e}},T=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}},x=function(e){return function(t){setTimeout((function(){t(T())}),1e3*e)}},A=function(){var e=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.create({baseURL:"http://127.0.0.1:8000/products/",headers:{"X-CSRFToken":O("csrftoken")}}).post("user-info/",{token:localStorage.getItem("token"),actionType:"getUser"}).catch((function(e){console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleChange=function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.props.login(n,r)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.error,a=e.token,n=this.state,c=n.username,s=n.password;return a?r.a.createElement(b.a,{to:"/"}):r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("form",{className:"box login-box",onSubmit:this.onSubmit},t&&r.a.createElement("p",null,this.props.error.message),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Username"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Username",name:"username",onChange:this.handleChange,value:c}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password",onChange:this.handleChange,value:s}))),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-fullwidth is-primary"},"Submit"))))}}]),a}(r.a.Component),R=Object(m.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"}),y.a.create({baseURL:j,headers:{"X-CSRFToken":O("csrftoken")}}).post("rest-auth/login/",{username:e,password:t}).then((function(e){var t=e.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",n),a(w(t)),a(x(3600)),l.b.success("Login success!!!")})).catch((function(e){a(S(e))}))}}(t,a))}}}))(I),U=function(){return r.a.createElement("div",{className:"not-found"},r.a.createElement("h1",null,"Page Not Found"))},L=a(22),P=a(30),D=a(83),F=a(82),_=a(15),X=function(e){return(e/100).toLocaleString("gb",{style:"currency",currency:"GBP"})},M=function(){var e=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.create({baseURL:"http://127.0.0.1:8000/products/",headers:{"X-CSRFToken":O("csrftoken")}}).post("get-car-num/",{token:localStorage.getItem("token"),actionType:"getCartNum"}).catch((function(e){console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){return y.a.create({baseURL:"http://127.0.0.1:8000/products/",headers:{"X-CSRFToken":O("csrftoken")}}).post("cart-info-update/",{token:localStorage.getItem("token"),actionType:"addToCart",id:e}).catch((function(e){console.log(e)}))},V=function(e){var t=e.cart||{},a=t.id,c=t.name,s=t.image,l=t.price,o=Object(n.useState)(e.cart.quantity),i=Object(P.a)(o,2),u=i[0],m=i[1],p=Object(n.useMemo)((function(){return X(u*parseInt(l))}),[u,l]);return r.a.createElement("div",{className:"columns is-vcentered"},r.a.createElement("div",{className:"column is-narrow"},r.a.createElement("span",{className:"close",onClick:function(){(function(e){return y.a.create({baseURL:"http://127.0.0.1:8000/products/",headers:{"X-CSRFToken":O("csrftoken")}}).post("cart-info-update/",{token:localStorage.getItem("token"),actionType:"deleteFromCart",id:e}).catch((function(e){console.log(e)}))})(a).then((function(){e.deleteCart(e.cart)}))}},"x")),r.a.createElement("div",{className:"column is-narrow"},r.a.createElement("img",{src:s,alt:c,width:"100"})),r.a.createElement("div",{className:"column cart-name is-narrow"},c),r.a.createElement("div",{className:"column"},r.a.createElement("span",{className:"price"},X(l))),r.a.createElement("div",{className:"column"},r.a.createElement("input",{type:"number",className:"input num-input",min:"1",value:u,onChange:function(t){var n=parseInt(t.target.value);m(n);var r=Object(_.a)(Object(_.a)({},e.cart),{},{quantity:n});(function(e,t){return y.a.create({baseURL:"http://127.0.0.1:8000/products/",headers:{"X-CSRFToken":O("csrftoken")}}).post("cart-info-update/",{token:localStorage.getItem("token"),actionType:"updateQuantity",id:e,quantity:t}).catch((function(e){console.log(e)}))})(a,n).then((function(){e.updateCart(r)}))}})),r.a.createElement("div",{className:"column"},r.a.createElement("span",{className:"sum-price"},p)))},W=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))((function(e){var t=Object(n.useState)([]),a=Object(P.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)((function(){e.isAuthenticated&&y.a.create({baseURL:"http://127.0.0.1:8000/products/",headers:{"X-CSRFToken":O("csrftoken")}}).post("get-cart-info/",{token:localStorage.getItem("token"),actionType:"getCartInfo"}).catch((function(e){console.log(e)})).then((function(e){s(e.data)}))}),[e.isAuthenticated]);var l=Object(n.useMemo)((function(){var e=c.map((function(e){return e.quantity*parseInt(e.price)})).reduce((function(e,t){return e+t}),0);return X(e)}),[c]),o=function(e){var t=Object(L.a)(c),a=t.findIndex((function(t){return t.id===e.id}));t.splice(a,1,e),s(t)},i=function(e){var t=c.filter((function(t){return t.id!==e.id}));s(t)};return r.a.createElement("div",{className:"cart-page"},r.a.createElement("span",{className:"cart-title"},"Shopping Cart"),r.a.createElement("div",{className:"cart-list"},r.a.createElement("div",{className:"columns is-vcentered cart-info"},r.a.createElement("div",{className:"column cart-info-name is-narrow"},r.a.createElement("span",null,"Name")),r.a.createElement("div",{className:"column cart-info-other"},r.a.createElement("span",null,"Price")),r.a.createElement("div",{className:"column cart-info-other"},r.a.createElement("span",null,"Quantity")),r.a.createElement("div",{className:"column cart-info-other"},r.a.createElement("span",null,"Total Price"))),r.a.createElement(D.a,{component:null},c.map((function(e){return r.a.createElement(F.a,{className:"cart-item",timeout:300,key:e.id},r.a.createElement(V,{key:e.id,cart:e,updateCart:o,deleteCart:i}))})))),0===c.length?r.a.createElement("p",{className:"no-cart"},"NO GOODS"):"",r.a.createElement("div",{className:"cart-total"},"Total:",r.a.createElement("span",{className:"total-price"},l)))})),q=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",nickname:"",email:"",password1:"",password2:""},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.nickname,c=a.email,s=a.password1,l=a.password2;e.props.signup(n,r,c,s,l)},e.handleChange=function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.nickname,n=e.email,c=e.password1,s=e.password2,l=this.props,o=l.error;return l.token?r.a.createElement(b.a,{to:"/"}):r.a.createElement("div",{className:"login-wrapper"},o&&r.a.createElement("p",null,this.props.error.message),r.a.createElement("form",{className:"box login-box",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Username"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Username",name:"username",onChange:this.handleChange,value:t}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Nickname"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Nickname",name:"nickname",onChange:this.handleChange,value:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Email",name:"email",onChange:this.handleChange,value:n}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password1",onChange:this.handleChange,value:c}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Confirm Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Confirm Password",name:"password2",onChange:this.handleChange,value:s}))),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-fullwidth is-primary"},"Submit"))))}}]),a}(r.a.Component),B=Object(m.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{signup:function(t,a,n,r,c){return e(function(e,t,a,n,r){return function(c){c({type:"AUTH_START"}),y.a.create({baseURL:j,headers:{"X-CSRFToken":O("csrftoken")}}).post("rest-auth/registration/",{username:e,email:a,password1:n,password2:r}).then((function(e){var t=e.data.key,a=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",a),c(w(t)),c(x(3600))})).catch((function(e){c(S(e))})),y.a.create({baseURL:j+"products/",headers:{"X-CSRFToken":O("csrftoken")}}).post("create-user/",{username:e,nickname:t,email:a}).catch((function(e){c(S(e))}))}}(t,a,n,r,c))}}}))(q),G=y.a.create({baseURL:"http://127.0.0.1:8000/api/",headers:{"X-CSRFToken":O("csrftoken")}}),Q=(y.a.create({baseURL:"http://127.0.0.1:8000/products/",headers:{"X-CSRFToken":O("csrftoken")}}),y.a.create({baseURL:"http://127.0.0.1:8000/",headers:{"X-CSRFToken":O("csrftoken")}}),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchText:"",isLogout:!0},e.handleChange=function(t){var a=t.target.value;e.setState({searchText:a}),e.props.search(a)},e.searchClear=function(){e.setState({searchText:""}),e.props.search("")},e.goCart=function(){if(!e.props.isAuthenticated)return e.props.history.push("/login"),void l.b.info("Please Login First");e.props.history.push("/cart")},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"tool-box"},r.a.createElement("div",{className:"logo-text"},"Shop"),r.a.createElement("div",{className:"search-box"},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input search-input",placeholder:"Search Product",value:this.state.searchText,onChange:this.handleChange})),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",onClick:this.searchClear},"X")))),r.a.createElement("div",{to:"/cart",className:"cart-box",onClick:this.goCart},r.a.createElement("i",{className:"fas fa-shopping-cart"}),r.a.createElement("span",{className:"cart-num"},"(",this.props.cartNum,")")))}}]),a}(r.a.Component)),J=Object(b.f)(Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(Q)),Y=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={active:!1,component:null,callback:function(){}},e.open=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{props:{},component:null,callback:function(){}},a=t.props,n=t.component,c=t.callback,s=(new Date).getTime(),l=r.a.createElement(n,Object(_.a)(Object(_.a)({},a),{},{close:e.close,key:s}));e.setState({active:!0,component:l,callback:c})},e.close=function(t){e.setState({active:!1}),t&&e.state.callback(t)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:{true:"panel-wrapper active",false:"panel-wrapper"}[this.state.active]},r.a.createElement("div",{className:"over-layer",onClick:function(){e.close()}}),r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"head"},r.a.createElement("span",{className:"close",onClick:function(){e.close()}},"x"),this.state.component)))}}]),a}(r.a.Component),$=document.createElement("div");document.body.appendChild($);var z=Object(c.render)(r.a.createElement(Y,null),$),K=function(e){return y.a.create({baseURL:"http://127.0.0.1:8000/api/",headers:{"X-CSRFToken":O("csrftoken")}}).post("",e).catch((function(e){console.log(e)}))},Z=function(e,t){return y.a.create({baseURL:"http://127.0.0.1:8000/api/",headers:{"X-CSRFToken":O("csrftoken")}}).put(e+"/",t).catch((function(e){console.log(e)}))},ee=function(e){return y.a.create({baseURL:"http://127.0.0.1:8000/api/",headers:{"X-CSRFToken":O("csrftoken")}}).delete(e+"/").catch((function(e){console.log(e)}))},te=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={id:"",name:"",price:"",tags:"",image:"",status:"available"},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.submit=function(t){t.preventDefault();var a=Object(_.a)({},e.state);""!==a.name&&""!==a.price&&""!==a.tags&&""!==a.image?Z(e.state.id,a).then((function(t){e.props.close(t.data),l.b.success("Successful edit item")})):l.b.warning("Please fill all data")},e.onDelete=function(){ee(e.state.id).then((function(t){e.props.deleteProduct(e.state.id),e.props.close(),l.b.success("Item deleted")}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.product,t=e.id,a=e.name,n=e.image,r=e.tags,c=e.price,s=e.status;this.setState({id:t,name:a,image:n,tags:r,price:c,status:s})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"inventory"},r.a.createElement("p",{className:"title has-text-centered"},"Inventory"),r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Message"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"name",value:this.state.name,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Price"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"price",value:this.state.price,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tags"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"tags",value:this.state.tags,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Image"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"image",value:this.state.image,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Status"),r.a.createElement("div",{className:"select is-fullwidth"},r.a.createElement("select",{name:"status",value:this.state.status,onChange:this.handleChange},r.a.createElement("option",null,"available"),r.a.createElement("option",null,"unavailable"))))),r.a.createElement("br",null),r.a.createElement("div",{className:"field is-grouped is-grouped-centered"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link"},"Submit")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger",type:"button",onClick:this.onDelete},"Delete")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",type:"button",onClick:function(){e.props.close()}},"Cancel")))))}}]),a}(r.a.Component),ae=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).toEdit=function(){z.open({component:te,props:{product:e.props.product,deleteProduct:e.props.delete},callback:function(t){t&&e.props.update(t)}})},e.addCart=Object(k.a)(N.a.mark((function t(){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.isAuthenticated){t.next=4;break}return e.props.history.push("/login"),l.b.info("Please Login First"),t.abrupt("return");case 4:a=e.props.product.id;try{H(a).then((function(){l.b.success("Item added to cart"),e.props.updateCartNum()}))}catch(n){l.b.error("Item add failed")}case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.product,t=e.name,a=e.image,n=e.tags,c=e.price,s=e.status;return r.a.createElement("div",{className:{available:"product",unavailable:"product out-stock"}[s]},this.props.userIsManager&&r.a.createElement("div",{className:"p-head has-text-right"},r.a.createElement("span",{className:"icon edit-btn",onClick:this.toEdit},r.a.createElement("i",{className:"fas fa-sliders-h"}))),r.a.createElement("div",{className:"p-content"},r.a.createElement("div",{className:"img-wrapper"},r.a.createElement("div",{className:"out-stock-text"},"Out Of Stock"),r.a.createElement("figure",{className:"image is4by3"},r.a.createElement("img",{src:a,alt:t}))),r.a.createElement("p",{className:"p-tags"},n),r.a.createElement("p",{className:"p-name"},t)),r.a.createElement("div",{className:"p-footer"},r.a.createElement("p",{className:"price"},X(c)),r.a.createElement("button",{className:"add-cart",disabled:"unavailable"===s,onClick:this.addCart},r.a.createElement("i",{className:"fas fa-shopping-cart"}),r.a.createElement("i",{className:"fas fa-exclamation"}))))}}]),a}(r.a.Component),ne=Object(b.f)(Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(ae)),re=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",price:"",tags:"",image:"",status:"available"},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.submit=function(t){t.preventDefault();var a=Object(_.a)({},e.state);""!==a.name&&""!==a.price&&""!==a.tags&&""!==a.image?K(a).then((function(t){e.props.close(t.data),l.b.success("Successful add item")})):l.b.warning("Please fill all data")},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"inventory"},r.a.createElement("p",{className:"title has-text-centered"},"Inventory"),r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Message"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"name",value:this.state.name,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Price"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"price",value:this.state.price,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tags"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"tags",value:this.state.tags,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Image"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"image",value:this.state.image,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Status"),r.a.createElement("div",{className:"select is-fullwidth"},r.a.createElement("select",{name:"status",value:this.state.status,onChange:this.handleChange},r.a.createElement("option",null,"available"),r.a.createElement("option",null,"unavailable"))))),r.a.createElement("br",null),r.a.createElement("div",{className:"field is-grouped is-grouped-centered"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link"},"Submit")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",type:"button",onClick:function(){e.props.close()}},"Cancel")))))}}]),a}(r.a.Component),ce=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={products:[],sourceProducts:[],cartNum:0,userIsManager:!1,isLogout:!0},e.search=function(t){var a=Object(L.a)(e.state.sourceProducts);a=a.filter((function(e){return!!e.name.match(new RegExp(t,"gi"))})),e.setState({products:a})},e.toAdd=function(){z.open({component:re,callback:function(t){t&&e.add(t)}})},e.add=function(t){var a=Object(L.a)(e.state.products);a.push(t);var n=Object(L.a)(e.state.sourceProducts);n.push(t),e.setState({products:a,sourceProducts:n})},e.update=function(t){var a=Object(L.a)(e.state.products),n=a.findIndex((function(e){return e.id===t.id}));a.splice(n,1,t);var r=Object(L.a)(e.state.sourceProducts),c=r.findIndex((function(e){return e.id===t.id}));r.splice(c,1,t),e.setState({products:a,sourceProducts:r})},e.delete=function(t){var a=e.state.products.filter((function(e){return e.id!==t})),n=e.state.sourceProducts.filter((function(e){return e.id!==t}));e.setState({products:a,sourceProducts:n})},e.updateCartNum=Object(k.a)(N.a.mark((function t(){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initCartNum();case 2:a=t.sent,e.setState({cartNum:a});case 4:case"end":return t.stop()}}),t)}))),e.initCartNum=Object(k.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return t=e.sent,a=t.amount,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),e.updateUserInfo=Object(k.a)(N.a.mark((function t(){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initUserInfo();case 2:a=t.sent,"manager"===a.usertype?e.setState({userIsManager:!0}):e.setState({userIsManager:!1});case 5:case"end":return t.stop()}}),t)}))),e.initUserInfo=Object(k.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),e.logoutRefresh=function(){e.updateUserInfo(),e.updateCartNum(),e.setState({isLogout:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;G.get("/").then((function(t){e.setState({products:t.data,sourceProducts:t.data})})),this.updateCartNum(),this.updateUserInfo()}},{key:"render",value:function(){var e=this;return!this.props.isAuthenticated&&this.state.isLogout&&this.logoutRefresh(),r.a.createElement("div",null,r.a.createElement(J,{search:this.search,cartNum:this.state.cartNum,updateCartNum:this.updateCartNum}),r.a.createElement("div",{className:"products"},r.a.createElement("div",{className:"columns is-multiline isdesktop"},r.a.createElement(D.a,{component:null},this.state.products.map((function(t){return r.a.createElement(F.a,{classNames:"product-fade",timeout:300,key:t.id},r.a.createElement("div",{className:"column is-3",key:t.id},r.a.createElement(ne,{product:t,update:e.update,delete:e.delete,updateCartNum:e.updateCartNum,userIsManager:e.state.userIsManager})))})))),this.state.userIsManager&&r.a.createElement("button",{className:"button is-primary add-btn",onClick:this.toAdd},"Add")))}}]),a}(r.a.Component),se=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(ce),le=function(e){return e.children},oe=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(le,null,r.a.createElement(b.b,{exact:!0,path:"/",component:se}),r.a.createElement(b.b,{path:"/login",component:R}),r.a.createElement(b.b,{path:"/register",component:B}),r.a.createElement(b.b,{path:"/cart",component:W}),r.a.createElement(b.b,{path:"/not-found",component:U}))}}]),a}(r.a.Component),ie=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:e.props.user.username,nickname:e.props.user.nickname,email:e.props.user.email,usertype:e.props.user.usertype},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"user-profile"},r.a.createElement("p",{className:"title has-text-centered"},"Profile"),r.a.createElement("fieldset",{disabled:!0,className:"has-text-left"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Username"),r.a.createElement("input",{type:"text",className:"input",defaultValue:this.state.username}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Nickname"),r.a.createElement("input",{type:"text",className:"input",defaultValue:this.state.nickname}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("input",{type:"text",className:"input",defaultValue:this.state.email}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Type"),r.a.createElement("input",{type:"text",className:"input",defaultValue:this.state.usertype})))),r.a.createElement("br",null),r.a.createElement("div",{className:"field is-grouped is-grouped-centered"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger",type:"button",onClick:function(){e.props.logout(),e.props.close("You have logged out")}},"Logout")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",type:"button",onClick:function(){e.props.close()}},"Cancel"))))}}]),a}(r.a.Component),ue=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).toProfile=Object(k.a)(N.a.mark((function t(){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:a=t.sent,z.open({component:ie,props:{user:a.data,logout:function(){e.props.logout()}},callback:function(e){l.b.info(e)}});case 4:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"grid"},r.a.createElement("div",{className:"start"},r.a.createElement(v.b,{to:"/"},"Home")),r.a.createElement("div",{className:"end"},this.props.isAuthenticated?r.a.createElement("span",{className:"nickname",onClick:this.toProfile},r.a.createElement("i",{className:"far fa-user"})," Profile"):r.a.createElement(n.Fragment,null,r.a.createElement(v.b,{to:"/login"},"Login"),r.a.createElement(v.b,{to:"/register"},"Register")))))}}]),a}(r.a.Component),me=Object(b.f)(Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{logout:function(){return e(T())}}}))(ue)),pe=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement(me,this.state),this.props.children)}}]),a}(r.a.Component),de=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(pe),he=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(de,this.props,r.a.createElement(oe,null)))}}]),a}(r.a.Component),fe=Object(m.b)(null,(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(void 0===t)e(T());else{var a=new Date(localStorage.getItem("expirationDate"));a<=new Date?e(T()):(e(w(t)),e(x((a.getTime()-(new Date).getTime())/1e3)))}}))}}}))(he),ve=a(48),be=function(e,t){return Object(_.a)(Object(_.a)({},e),t)},ge={token:null,error:null,loading:!1},Ee=function(e,t){return be(e,{error:null,loading:!0})},Ne=function(e,t){return be(e,{token:t.token,error:null,loading:!1})},ke=function(e,t){return be(e,{error:t.error,loading:!1})},Ce=function(e,t){return be(e,{token:null})},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Ee(e);case"AUTH_SUCCESS":return Ne(e,t);case"AUTH_FAIL":return ke(e,t);case"AUTH_LOGOUT":return Ce(e);default:return e}},Oe={shoppingCart:null,error:null,loading:!1},je=function(e,t){return be(e,{error:null,loading:!0})},we=function(e,t){return be(e,{shoppingCart:t.data,error:null,loading:!1})},Se=function(e,t){return be(e,{error:t.error,loading:!1})},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_START":return je(e);case"CART_SUCCESS":return we(e,t);case"CART_FAIL":return Se(e,t);default:return e}},xe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,Ae=Object(u.c)({auth:ye,cart:Te}),Ie=Object(u.e)(Ae,xe(Object(u.a)(ve.a))),Re=r.a.createElement("div",null,r.a.createElement(l.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement(m.a,{store:Ie},r.a.createElement(fe,null)));s.a.render(Re,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");o?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):i(e)}))}}()}},[[50,1,2]]]);
//# sourceMappingURL=main.d1076f28.chunk.js.map